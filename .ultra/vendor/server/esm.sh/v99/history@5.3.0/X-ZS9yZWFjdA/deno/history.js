/* esm.sh - esbuild bundle(history@5.3.0) deno production */
import V from"/v99/@babel/runtime@7.20.1/X-ZS9yZWFjdA/deno/helpers/esm/extends.js";var b;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(b||(b={}));var R=function(e){return e};var M="beforeunload",q="hashchange",Y="popstate";function K(e){e===void 0&&(e={});var y=e,s=y.window,i=s===void 0?document.defaultView:s,h=i.history;function f(){var r=i.location,n=r.pathname,t=r.search,c=r.hash,l=h.state||{};return[l.idx,R({pathname:n,search:t,hash:c,state:l.usr||null,key:l.key||"default"})]}var u=null;function L(){if(u)v.call(u),u=null;else{var r=b.Pop,n=f(),t=n[0],c=n[1];if(v.length){if(t!=null){var l=p-t;l&&(u={action:r,location:c,retry:function(){d(l*-1)}},d(l))}}else T(r)}}i.addEventListener(Y,L);var x=b.Pop,O=f(),p=O[0],k=O[1],_=$(),v=$();p==null&&(p=0,h.replaceState(V({},h.state,{idx:p}),""));function A(r){return typeof r=="string"?r:D(r)}function S(r,n){return n===void 0&&(n=null),R(V({pathname:k.pathname,hash:"",search:""},typeof r=="string"?J(r):r,{state:n,key:j()}))}function H(r,n){return[{usr:r.state,key:r.key,idx:n},A(r)]}function E(r,n,t){return!v.length||(v.call({action:r,location:n,retry:t}),!1)}function T(r){x=r;var n=f();p=n[0],k=n[1],_.call({action:x,location:k})}function a(r,n){var t=b.Push,c=S(r,n);function l(){a(r,n)}if(E(t,c,l)){var w=H(c,p+1),m=w[0],P=w[1];try{h.pushState(m,"",P)}catch{i.location.assign(P)}T(t)}}function o(r,n){var t=b.Replace,c=S(r,n);function l(){o(r,n)}if(E(t,c,l)){var w=H(c,p),m=w[0],P=w[1];h.replaceState(m,"",P),T(t)}}function d(r){h.go(r)}var g={get action(){return x},get location(){return k},createHref:A,push:a,replace:o,go:d,back:function(){d(-1)},forward:function(){d(1)},listen:function(n){return _.push(n)},block:function(n){var t=v.push(n);return v.length===1&&i.addEventListener(M,B),function(){t(),v.length||i.removeEventListener(M,B)}}};return g}function U(e){e===void 0&&(e={});var y=e,s=y.window,i=s===void 0?document.defaultView:s,h=i.history;function f(){var n=J(i.location.hash.substr(1)),t=n.pathname,c=t===void 0?"/":t,l=n.search,w=l===void 0?"":l,m=n.hash,P=m===void 0?"":m,N=h.state||{};return[N.idx,R({pathname:c,search:w,hash:P,state:N.usr||null,key:N.key||"default"})]}var u=null;function L(){if(u)v.call(u),u=null;else{var n=b.Pop,t=f(),c=t[0],l=t[1];if(v.length){if(c!=null){var w=p-c;w&&(u={action:n,location:l,retry:function(){g(w*-1)}},g(w))}}else a(n)}}i.addEventListener(Y,L),i.addEventListener(q,function(){var n=f(),t=n[1];D(t)!==D(k)&&L()});var x=b.Pop,O=f(),p=O[0],k=O[1],_=$(),v=$();p==null&&(p=0,h.replaceState(V({},h.state,{idx:p}),""));function A(){var n=document.querySelector("base"),t="";if(n&&n.getAttribute("href")){var c=i.location.href,l=c.indexOf("#");t=l===-1?c:c.slice(0,l)}return t}function S(n){return A()+"#"+(typeof n=="string"?n:D(n))}function H(n,t){return t===void 0&&(t=null),R(V({pathname:k.pathname,hash:"",search:""},typeof n=="string"?J(n):n,{state:t,key:j()}))}function E(n,t){return[{usr:n.state,key:n.key,idx:t},S(n)]}function T(n,t,c){return!v.length||(v.call({action:n,location:t,retry:c}),!1)}function a(n){x=n;var t=f();p=t[0],k=t[1],_.call({action:x,location:k})}function o(n,t){var c=b.Push,l=H(n,t);function w(){o(n,t)}if(T(c,l,w)){var m=E(l,p+1),P=m[0],N=m[1];try{h.pushState(P,"",N)}catch{i.location.assign(N)}a(c)}}function d(n,t){var c=b.Replace,l=H(n,t);function w(){d(n,t)}if(T(c,l,w)){var m=E(l,p),P=m[0],N=m[1];h.replaceState(P,"",N),a(c)}}function g(n){h.go(n)}var r={get action(){return x},get location(){return k},createHref:S,push:o,replace:d,go:g,back:function(){g(-1)},forward:function(){g(1)},listen:function(t){return _.push(t)},block:function(t){var c=v.push(t);return v.length===1&&i.addEventListener(M,B),function(){c(),v.length||i.removeEventListener(M,B)}}};return r}function F(e){e===void 0&&(e={});var y=e,s=y.initialEntries,i=s===void 0?["/"]:s,h=y.initialIndex,f=i.map(function(a){var o=R(V({pathname:"/",search:"",hash:"",state:null,key:j()},typeof a=="string"?J(a):a));return o}),u=C(h??f.length-1,0,f.length-1),L=b.Pop,x=f[u],O=$(),p=$();function k(a){return typeof a=="string"?a:D(a)}function _(a,o){return o===void 0&&(o=null),R(V({pathname:x.pathname,search:"",hash:""},typeof a=="string"?J(a):a,{state:o,key:j()}))}function v(a,o,d){return!p.length||(p.call({action:a,location:o,retry:d}),!1)}function A(a,o){L=a,x=o,O.call({action:L,location:x})}function S(a,o){var d=b.Push,g=_(a,o);function r(){S(a,o)}v(d,g,r)&&(u+=1,f.splice(u,f.length,g),A(d,g))}function H(a,o){var d=b.Replace,g=_(a,o);function r(){H(a,o)}v(d,g,r)&&(f[u]=g,A(d,g))}function E(a){var o=C(u+a,0,f.length-1),d=b.Pop,g=f[o];function r(){E(a)}v(d,g,r)&&(u=o,A(d,g))}var T={get index(){return u},get action(){return L},get location(){return x},createHref:k,push:S,replace:H,go:E,back:function(){E(-1)},forward:function(){E(1)},listen:function(o){return O.push(o)},block:function(o){return p.push(o)}};return T}function C(e,y,s){return Math.min(Math.max(e,y),s)}function B(e){e.preventDefault(),e.returnValue=""}function $(){var e=[];return{get length(){return e.length},push:function(s){return e.push(s),function(){e=e.filter(function(i){return i!==s})}},call:function(s){e.forEach(function(i){return i&&i(s)})}}}function j(){return Math.random().toString(36).substr(2,8)}function D(e){var y=e.pathname,s=y===void 0?"/":y,i=e.search,h=i===void 0?"":i,f=e.hash,u=f===void 0?"":f;return h&&h!=="?"&&(s+=h.charAt(0)==="?"?h:"?"+h),u&&u!=="#"&&(s+=u.charAt(0)==="#"?u:"#"+u),s}function J(e){var y={};if(e){var s=e.indexOf("#");s>=0&&(y.hash=e.substr(s),e=e.substr(0,s));var i=e.indexOf("?");i>=0&&(y.search=e.substr(i),e=e.substr(0,i)),e&&(y.pathname=e)}return y}export{b as Action,K as createBrowserHistory,U as createHashHistory,F as createMemoryHistory,D as createPath,J as parsePath};
