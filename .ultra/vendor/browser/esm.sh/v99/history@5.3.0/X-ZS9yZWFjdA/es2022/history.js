import t from"/v99/@babel/runtime@7.20.1/X-ZS9yZWFjdA/es2022/helpers/esm/extends.js";!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(n||(n={}));var n,e=function(t){return t},r="beforeunload",a="popstate";function i(i){void 0===i&&(i={});var o=i.window,u=void 0===o?document.defaultView:o,c=u.history;function p(){var t=u.location,n=t.pathname,r=t.search,a=t.hash,i=c.state||{};return[i.idx,e({pathname:n,search:r,hash:a,state:i.usr||null,key:i.key||"default"})]}var d=null;u.addEventListener(a,function(){if(d)P.call(d),d=null;else{var t=n.Pop,e=p(),r=e[0],a=e[1];if(P.length){if(null!=r){var i=m-r;i&&(d={action:t,location:a,retry:function(){L(-1*i)}},L(i))}}else H(t)}});var g=n.Pop,y=p(),m=y[0],b=y[1],k=l(),P=l();function x(t){return"string"==typeof t?t:h(t)}function E(n,r){return void 0===r&&(r=null),e(t({pathname:b.pathname,hash:"",search:""},"string"==typeof n?v(n):n,{state:r,key:f()}))}function w(t,n){return[{usr:t.state,key:t.key,idx:n},x(t)]}function S(t,n,e){return!P.length||(P.call({action:t,location:n,retry:e}),!1)}function H(t){g=t;var n=p();m=n[0],b=n[1],k.call({action:g,location:b})}function L(t){c.go(t)}return null==m&&(m=0,c.replaceState(t({},c.state,{idx:m}),"")),{get action(){return g},get location(){return b},createHref:x,push:function t(e,r){var a=n.Push,i=E(e,r);if(S(a,i,function(){t(e,r)})){var o=w(i,m+1),s=o[0],l=o[1];try{c.pushState(s,"",l)}catch{u.location.assign(l)}H(a)}},replace:function t(e,r){var a=n.Replace,i=E(e,r);if(S(a,i,function(){t(e,r)})){var o=w(i,m),u=o[0],s=o[1];c.replaceState(u,"",s),H(a)}},go:L,back:function(){L(-1)},forward:function(){L(1)},listen:function(t){return k.push(t)},block:function(t){var n=P.push(t);return 1===P.length&&u.addEventListener(r,s),function(){n(),P.length||u.removeEventListener(r,s)}}}}function o(i){void 0===i&&(i={});var o=i.window,u=void 0===o?document.defaultView:o,c=u.history;function p(){var t=v(u.location.hash.substr(1)),n=t.pathname,r=t.search,a=t.hash,i=c.state||{};return[i.idx,e({pathname:void 0===n?"/":n,search:void 0===r?"":r,hash:void 0===a?"":a,state:i.usr||null,key:i.key||"default"})]}var d=null;function g(){if(d)x.call(d),d=null;else{var t=n.Pop,e=p(),r=e[0],a=e[1];if(x.length){if(null!=r){var i=b-r;i&&(d={action:t,location:a,retry:function(){A(-1*i)}},A(i))}}else L(t)}}u.addEventListener(a,g),u.addEventListener("hashchange",function(){h(p()[1])!==h(k)&&g()});var y=n.Pop,m=p(),b=m[0],k=m[1],P=l(),x=l();function E(t){return function(){var t=document.querySelector("base"),n="";if(t&&t.getAttribute("href")){var e=u.location.href,r=e.indexOf("#");n=-1===r?e:e.slice(0,r)}return n}()+"#"+("string"==typeof t?t:h(t))}function w(n,r){return void 0===r&&(r=null),e(t({pathname:k.pathname,hash:"",search:""},"string"==typeof n?v(n):n,{state:r,key:f()}))}function S(t,n){return[{usr:t.state,key:t.key,idx:n},E(t)]}function H(t,n,e){return!x.length||(x.call({action:t,location:n,retry:e}),!1)}function L(t){y=t;var n=p();b=n[0],k=n[1],P.call({action:y,location:k})}function A(t){c.go(t)}return null==b&&(b=0,c.replaceState(t({},c.state,{idx:b}),"")),{get action(){return y},get location(){return k},createHref:E,push:function t(e,r){var a=n.Push,i=w(e,r);if(H(a,i,function(){t(e,r)})){var o=S(i,b+1),s=o[0],l=o[1];try{c.pushState(s,"",l)}catch{u.location.assign(l)}L(a)}},replace:function t(e,r){var a=n.Replace,i=w(e,r);if(H(a,i,function(){t(e,r)})){var o=S(i,b),u=o[0],s=o[1];c.replaceState(u,"",s),L(a)}},go:A,back:function(){A(-1)},forward:function(){A(1)},listen:function(t){return P.push(t)},block:function(t){var n=x.push(t);return 1===x.length&&u.addEventListener(r,s),function(){n(),x.length||u.removeEventListener(r,s)}}}}function u(r){void 0===r&&(r={});var a=r,i=a.initialEntries,o=a.initialIndex,u=(void 0===i?["/"]:i).map(function(n){return e(t({pathname:"/",search:"",hash:"",state:null,key:f()},"string"==typeof n?v(n):n))}),s=c(o??u.length-1,0,u.length-1),p=n.Pop,d=u[s],g=l(),y=l();function m(n,r){return void 0===r&&(r=null),e(t({pathname:d.pathname,search:"",hash:""},"string"==typeof n?v(n):n,{state:r,key:f()}))}function b(t,n,e){return!y.length||(y.call({action:t,location:n,retry:e}),!1)}function k(t,n){p=t,d=n,g.call({action:p,location:d})}function P(t){var e=c(s+t,0,u.length-1),r=n.Pop,a=u[e];b(r,a,function(){P(t)})&&(s=e,k(r,a))}return{get index(){return s},get action(){return p},get location(){return d},createHref:function(t){return"string"==typeof t?t:h(t)},push:function t(e,r){var a=n.Push,i=m(e,r);b(a,i,function(){t(e,r)})&&(s+=1,u.splice(s,u.length,i),k(a,i))},replace:function t(e,r){var a=n.Replace,i=m(e,r);b(a,i,function(){t(e,r)})&&(u[s]=i,k(a,i))},go:P,back:function(){P(-1)},forward:function(){P(1)},listen:function(t){return g.push(t)},block:function(t){return y.push(t)}}}function c(t,n,e){return Math.min(Math.max(t,n),e)}function s(t){t.preventDefault(),t.returnValue=""}function l(){var t=[];return{get length(){return t.length},push:function(n){return t.push(n),function(){t=t.filter(function(t){return t!==n})}},call:function(n){t.forEach(function(t){return t&&t(n)})}}}function f(){return Math.random().toString(36).substr(2,8)}function h(t){var n=t.pathname,e=void 0===n?"/":n,r=t.search,a=void 0===r?"":r,i=t.hash,o=void 0===i?"":i;return a&&"?"!==a&&(e+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(e+="#"===o.charAt(0)?o:"#"+o),e}function v(t){var n={};if(t){var e=t.indexOf("#");e>=0&&(n.hash=t.substr(e),t=t.substr(0,e));var r=t.indexOf("?");r>=0&&(n.search=t.substr(r),t=t.substr(0,r)),t&&(n.pathname=t)}return n}export{n as Action,i as createBrowserHistory,o as createHashHistory,u as createMemoryHistory,h as createPath,v as parsePath};