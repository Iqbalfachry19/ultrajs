import{parsePath as e,createMemoryHistory as t,Action as a}from"/v99/history@5.3.0/X-ZS9yZWFjdA/es2022/history.js";import{Action as n,createPath as r,parsePath as s}from"/v99/history@5.3.0/X-ZS9yZWFjdA/es2022/history.js";import{createContext as i,useContext as l,useMemo as o,useRef as u,useEffect as h,useCallback as c,createElement as p,useState as m,useLayoutEffect as f,Children as v,isValidElement as d,Fragment as g}from"react";var y=i(null),P=i(null),x=i({outlet:null,matches:[]});function S(e,t){if(!e)throw Error(t)}function $(e,t){return void 0===t&&(t={}),e.replace(/:(\w+)/g,(e,a)=>(null==t[a]&&S(!1),t[a])).replace(/\/*\*$/,e=>null==t["*"]?"":t["*"].replace(/^\/*/,"/"))}function E(t,a,n){void 0===n&&(n="/");let r="string"==typeof a?e(a):a,s=N(r.pathname||"/",n);if(null==s)return null;let i=function e(t,a,n,r){return void 0===a&&(a=[]),void 0===n&&(n=[]),void 0===r&&(r=""),t.forEach((t,s)=>{var i;let l,o,u={relativePath:t.path||"",caseSensitive:!0===t.caseSensitive,childrenIndex:s,route:t};u.relativePath.startsWith("/")&&(u.relativePath.startsWith(r)||S(!1),u.relativePath=u.relativePath.slice(r.length));let h=O([r,u.relativePath]),c=n.concat(u);t.children&&t.children.length>0&&(!0===t.index&&S(!1),e(t.children,a,c,h)),(null!=t.path||t.index)&&a.push({path:h,score:(i=t.index,o=(l=h.split("/")).length,l.some(W)&&(o+=-2),i&&(o+=2),l.filter(e=>!W(e)).reduce((e,t)=>e+(R.test(t)?3:""===t?1:10),o)),routesMeta:c})}),a}(t);!function(e){e.sort((e,t)=>{var a,n;return e.score!==t.score?t.score-e.score:(a=e.routesMeta.map(e=>e.childrenIndex),n=t.routesMeta.map(e=>e.childrenIndex),a.length===n.length&&a.slice(0,-1).every((e,t)=>e===n[t])?a[a.length-1]-n[n.length-1]:0)})}(i);let l=null;for(let o=0;null==l&&o<i.length;++o)l=function(e,t){let{routesMeta:a}=e,n={},r="/",s=[];for(let i=0;i<a.length;++i){let l=a[i],o=i===a.length-1,u="/"===r?t:t.slice(r.length)||"/",h=b({path:l.relativePath,caseSensitive:l.caseSensitive,end:o},u);if(!h)return null;Object.assign(n,h.params);let c=l.route;s.push({params:n,pathname:O([r,h.pathname]),pathnameBase:j(O([r,h.pathnameBase])),route:c}),"/"!==h.pathnameBase&&(r=O([r,h.pathnameBase]))}return s}(i[o],s);return l}var R=/^:\w+$/,W=e=>"*"===e;function b(e,t){var a,n,r;let s,i;"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[l,o]=(a=e.path,n=e.caseSensitive,r=e.end,void 0===n&&(n=!1),void 0===r&&(r=!0),s=[],i="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(s.push(t),"([^\\/]+)")),a.endsWith("*")?(s.push("*"),i+="*"===a||"/*"===a?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=r?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[RegExp(i,n?void 0:"i"),s]),u=t.match(l);if(!u)return null;let h=u[0],c=h.replace(/(.)\/+$/,"$1"),p=u.slice(1);return{params:o.reduce((e,t,a)=>{if("*"===t){let n=p[a]||"";c=h.slice(0,h.length-n.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch{return e}}(p[a]||"",0),e},{}),pathname:h,pathnameBase:c,pattern:e}}function B(t,a){let n;void 0===a&&(a="/");let{pathname:r,search:s="",hash:i=""}="string"==typeof t?e(t):t;return{pathname:r?r.startsWith("/")?r:(n=a.replace(/\/+$/,"").split("/"),r.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"):a,search:A(s),hash:M(i)}}function C(t,a,n){let r="string"==typeof t?e(t):t,s=""===t||""===r.pathname?"/":r.pathname,i;if(null==s)i=n;else{let l=a.length-1;if(s.startsWith("..")){let o=s.split("/");for(;".."===o[0];)o.shift(),l-=1;r.pathname=o.join("/")}i=l>=0?a[l]:"/"}let u=B(r,i);return s&&"/"!==s&&s.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=e.charAt(t.length);return a&&"/"!==a?null:e.slice(t.length)||"/"}var O=e=>e.join("/").replace(/\/\/+/g,"/"),j=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),A=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",M=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function w(t){F()||S(!1);let{basename:a,navigator:n}=l(y),{hash:r,pathname:s,search:i}=H(t),o=s;if("/"!==a){let u=""===t||""===t.pathname?"/":"string"==typeof t?e(t).pathname:t.pathname,h=null!=u&&u.endsWith("/");o="/"===s?a+(h?"/":""):O([a,s])}return n.createHref({pathname:o,search:i,hash:r})}function F(){return null!=l(P)}function I(){return F()||S(!1),l(P).location}function T(){return l(P).navigationType}function L(e){F()||S(!1);let{pathname:t}=I();return o(()=>b(e,t),[t,e])}function _(){F()||S(!1);let{basename:e,navigator:t}=l(y),{matches:a}=l(x),{pathname:n}=I(),r=JSON.stringify(a.map(e=>e.pathnameBase)),s=u(!1);return h(()=>{s.current=!0}),c(function(a,i){if(void 0===i&&(i={}),!s.current)return;if("number"==typeof a){t.go(a);return}let l=C(a,JSON.parse(r),n);"/"!==e&&(l.pathname=O([e,l.pathname])),(i.replace?t.replace:t.push)(l,i.state)},[e,t,r,n])}var k=i(null);function J(){return l(k)}function U(e){let t=l(x).outlet;return t&&p(k.Provider,{value:e},t)}function Z(){let{matches:e}=l(x),t=e[e.length-1];return t?t.params:{}}function H(e){let{matches:t}=l(x),{pathname:a}=I(),n=JSON.stringify(t.map(e=>e.pathnameBase));return o(()=>C(e,JSON.parse(n),a),[e,n,a])}function V(t,a){F()||S(!1);let{matches:n}=l(x),r=n[n.length-1],s=r?r.params:{},i=(r&&r.pathname,r?r.pathnameBase:"/"),o=(r&&r.route,I()),u;if(a){var h;let c="string"==typeof a?e(a):a;"/"===i||(null==(h=c.pathname)?void 0:h.startsWith(i))||S(!1),u=c}else u=o;let p=u.pathname||"/",m=E(t,{pathname:"/"===i?p:p.slice(i.length)||"/"});return X(m&&m.map(e=>Object.assign({},e,{params:Object.assign({},s,e.params),pathname:O([i,e.pathname]),pathnameBase:"/"===e.pathnameBase?i:O([i,e.pathnameBase])})),n)}function X(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((a,n,r)=>p(x.Provider,{children:void 0!==n.route.element?n.route.element:a,value:{outlet:a,matches:t.concat(e.slice(0,r+1))}}),null)}function q(e){let{basename:a,children:n,initialEntries:r,initialIndex:s}=e,i=u();null==i.current&&(i.current=t({initialEntries:r,initialIndex:s}));let l=i.current,[o,h]=m({action:l.action,location:l.location});return f(()=>l.listen(h),[l]),p(K,{basename:a,children:n,location:o.location,navigationType:o.action,navigator:l})}function z(e){let{to:t,replace:a,state:n}=e;F()||S(!1);let r=_();return h(()=>{r(t,{replace:a,state:n})}),null}function D(e){return U(e.context)}function G(e){S(!1)}function K(t){let{basename:n="/",children:r=null,location:s,navigationType:i=a.Pop,navigator:l,static:u=!1}=t;F()&&S(!1);let h=j(n),c=o(()=>({basename:h,navigator:l,static:u}),[h,l,u]);"string"==typeof s&&(s=e(s));let{pathname:m="/",search:f="",hash:v="",state:d=null,key:g="default"}=s,x=o(()=>{let e=N(m,h);return null==e?null:{pathname:e,search:f,hash:v,state:d,key:g}},[h,m,f,v,d,g]);return null==x?null:p(y.Provider,{value:c},p(P.Provider,{children:r,value:{location:x,navigationType:i}}))}function Q(e){let{children:t,location:a}=e;return V(Y(t),a)}function Y(e){let t=[];return v.forEach(e,e=>{if(!d(e))return;if(e.type===g){t.push.apply(t,Y(e.props.children));return}e.type!==G&&S(!1);let a={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(a.children=Y(e.props.children)),t.push(a)}),t}function ee(e){return X(e)}export{q as MemoryRouter,z as Navigate,n as NavigationType,D as Outlet,G as Route,K as Router,Q as Routes,P as UNSAFE_LocationContext,y as UNSAFE_NavigationContext,x as UNSAFE_RouteContext,r as createPath,Y as createRoutesFromChildren,$ as generatePath,b as matchPath,E as matchRoutes,s as parsePath,ee as renderMatches,B as resolvePath,w as useHref,F as useInRouterContext,I as useLocation,L as useMatch,_ as useNavigate,T as useNavigationType,U as useOutlet,J as useOutletContext,Z as useParams,H as useResolvedPath,V as useRoutes};